input{
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "filebeat"
        type => "filebeat"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "bbpf-system"
        type => "bbpf_system"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "boss-api"
        type => "boss_api"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "local-system"
        type => "local_system"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "rrq-statis-history"
        type => "rrq_statis_history"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-adapter"
        type => "vems_adapter"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-api"
        type => "vems_api"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-boss-common-goods"
        type => "vems_boss_common_goods"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-boss-goods-center"
        type => "vems_boss_goods_center"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-boss-manager"
        type => "vems_boss_manager"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-boss-open-way"
        type => "vems_boss_open_way"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-console-api"
        type => "vems_console_api"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-content"
        type => "vems_content"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-data-analysis"
        type => "vems_data_analysis"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-dispatch"
        type => "vems_dispatch"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-finance"
        type => "vems_finance"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-inventory-adapter"
        type => "vems_inventory_adapter"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-membership"
        type => "vems_membership"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-merchandise"
        type => "vems_merchandise"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-mqmanagement"
        type => "vems_mqmanagement"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-onlinemall"
        type => "vems_onlinemall"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-openapi"
        type => "vems_openapi"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-openmanager"
        type => "vems_openmanager"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-operation-manager"
        type => "vems_operation_manager"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-operator"
        type => "vems_operator"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-order"
        type => "vems_order"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-pay"
        type => "vems_pay"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-portal"
        type => "vems_portal"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-presale"
        type => "vems_presale"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-promotion"
        type => "vems_promotion"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-sale"
        type => "vems_sale"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-tenant"
        type => "vems_tenant"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-third-party-communicate"
        type => "vems_third_party_communicate"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-vendingmachine"
        type => "vems_vendingmachine"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-wechat"
        type => "vems_wechat"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-workorderservice"
        type => "vems_workorderservice"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-statistic"
        type => "vems_statistic"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-unicorn-pay"
        type => "vems_unicorn_pay"
    }
    redis  {
        host => "flr-redis"
        port => "6379"
        db => "0"
        data_type => "list"
        key => "vems-unicorn-api"
        type => "vems_unicorn_api"
    }
}
filter {
    ruby {
         # 新增索引日期,解决地区时差问题
         code => "event.set('index_date', event.get('@timestamp').time.localtime + 8*60*60)"
    }
    mutate  {
        convert => ["index_date", "string"]
        gsub => ["index_date", ":([\S\s]*?)Z", ""]
        gsub => ["index_date", "T", ""]
        gsub => ["index_date", "-", ""]
    }
}

output{
    if [type] == "bbpf_system" {
        file {
            path => "/data/logs/vems/bbpf_system/bbpf_system-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "boss_api" {
        file {
            path => "/data/logs/vems/boss_api/boss_api-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "local_system" {
        file {
            path => "/data/logs/vems/local_system/local_system-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "rrq_statis_history" {
        file {
            path => "/data/logs/vems/rrq_statis_history/rrq_statis_history-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_adapter" {
        file {
            path => "/data/logs/vems/vems_adapter/vems_adapter-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_api" {
        file {
            path => "/data/logs/vems/vems_api/vems_api-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_boss_common_goods" {
        file {
            path => "/data/logs/vems/vems_boss_common_goods/vems_boss_common_goods-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_boss_goods_center" {
        file {
            path => "/data/logs/vems/vems_boss_goods_center/vems_boss_goods_center-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_boss_manager" {
        file {
            path => "/data/logs/vems/vems_boss_manager/vems_boss_manager-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_boss_open_way" {
        file {
            path => "/data/logs/vems/vems_boss_open_way/vems_boss_open_way-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_console_api" {
        file {
            path => "/data/logs/vems/vems_console_api/vems_console_api-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_content" {
        file {
            path => "/data/logs/vems/vems_content/vems_content-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_data_analysis" {
        file {
            path => "/data/logs/vems/vems_data_analysis/vems_data_analysis-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_dispatch" {
        file {
            path => "/data/logs/vems/vems_dispatch/vems_dispatch-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_finance" {
        file {
            path => "/data/logs/vems/vems_finance/vems_finance-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_inventory_adapter" {
        file {
            path => "/data/logs/vems/vems_inventory_adapter/vems_inventory_adapter-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_membership" {
        file {
            path => "/data/logs/vems/vems_membership/vems_membership-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_merchandise" {
        file {
            path => "/data/logs/vems/vems_merchandise/vems_merchandise-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_mqmanagement" {
        file {
            path => "/data/logs/vems/vems_mqmanagement/vems_mqmanagement-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_onlinemall" {
        file {
            path => "/data/logs/vems/vems_onlinemall/vems_onlinemall-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_openapi" {
        file {
            path => "/data/logs/vems/vems_openapi/vems_openapi-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_openmanager" {
        file {
            path => "/data/logs/vems/vems_openmanager/vems_openmanager-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_operation_manager" {
        file {
            path => "/data/logs/vems/vems_operation_manager/vems_operation_manager-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_operator" {
        file {
            path => "/data/logs/vems/vems_operator/vems_operator-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_order" {
        file {
            path => "/data/logs/vems/vems_order/vems_order-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_pay" {
        file {
            path => "/data/logs/vems/vems_pay/vems_pay-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_portal" {
        file {
            path => "/data/logs/vems/vems_portal/vems_portal-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_presale" {
        file {
            path => "/data/logs/vems/vems_presale/vems_presale-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_promotion" {
        file {
            path => "/data/logs/vems/vems_promotion/vems_promotion-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_sale" {
        file {
            path => "/data/logs/vems/vems_sale/vems_sale-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_tenant" {
        file {
            path => "/data/logs/vems/vems_tenant/vems_tenant-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_third_party_communicate" {
        file {
            path => "/data/logs/vems/vems_third_party_communicate/vems_third_party_communicate-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_vendingmachine" {
        file {
            path => "/data/logs/vems/vems_vendingmachine/vems_vendingmachine-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_wechat" {
        file {
            path => "/data/logs/vems/vems_wechat/vems_wechat-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_workorderservice" {
        file {
            path => "/data/logs/vems/vems_workorderservice/vems_workorderservice-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_statistic" {
        file {
            path => "/data/logs/vems/vems_statistic/vems_statistic-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_unicorn_pay" {
        file {
            path => "/data/logs/vems/vems_unicorn_pay/vems_unicorn_pay-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else if [type] == "vems_unicorn_api" {
        file {
            path => "/data/logs/vems/vems_unicorn_api/vems_unicorn_api-%{index_date}.log"
            codec => line { format => "%{host}%{message}"}
        }
    }else{
        file {
            path => "/data/logs/vems/filebeat_error.log"
            codec => line { format => "%{message}"}
        }
    }
    #stdout {
    #    codec => rubydebug
    #}
}
